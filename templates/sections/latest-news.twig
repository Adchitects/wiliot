<section class="u-section--latest-news u-section">
	<div class="u-wrapper">
		<div class="latest-news">
			<span class="u-subtitle u-subtitle--section latest-news__subtitle">News</span>
			<h2 class="u-title u-title--section latest-news__title">Our Latest</h2>
			{% set latestEntries = craft.entries.section('newsPosts').order('postDate desc') %}
			<div class="latest-news__listing">
				{% set latestNews = latestEntries.limit(3) %}
				{% if latestNews|length %}
					{% for post in latestNews %}
						{% set image = post.newsPostsfeaturedImage.one() %}
						{% if image %}
							{% set imageUrl = image.getUrl() %}
							{% set imageWidth = image.getWidth() %}
							{% set imageHeight = image.getHeight() %}
							{% set imageAlt = image.title %}
						{% endif %}
						{% set title = post.title %}
						{% set desc = post.newsPostsExcerpt|striptags|striptags %}
						{% set descSliced = desc|slice(0, 107) ~ '...' %}
						<a href="{{ post.url}}" class="post">
							<div class="post__image-hld">
								{% if image %}
									<img class="js-lazy" data-src="{{ imageUrl }}" alt="{{ imageAlt }}" width="{{ imageWidth }}" height="{{ imageHeight }}"/>
								{% else %}
									<img class="js-lazy" data-src="{{ alias('@assets/img/placeholder.jpg') }}" width="300" height="225" alt="Wiliot placeholder image">
								{% endif %}
							</div>
							<div class="post__date">{{ post.postDate | date("F d, Y") }}</div>
							<div class="post__title">{{ title|length > 45 ? title|slice(0, 42) ~ '...' : title }}</div>
							<div class="post__description">{{ desc|length > 110 ? descSliced|raw : desc|raw }}</div>
							<div class="post__btn u-btn u-btn--arrow">
								<span class="text">Read more</span>
							</div>
						</a>
					{% endfor %}
				{% endif %}
			</div>
		</div>
	</div>
</section>
