{% set title = entry.contactTitle %}
{% set subtitle = entry.contactSubtitle %}
{% set image = entry.contactImage.one() %}
{% set links = entry.contactLinksMatrix.all() %}
{% set offices = entry.contactOffices.all() %}
{% set socials = pageOptions.pageOptionsSocials.all() %}
<section class="u-section u-section--contact js-bg-shape-hld">
	<div class="bg-shape bg-shape--top-right js-bg-shape" data-version="top-right">
		<img class="s1 js-s1 js-lazy" data-src="{{ alias('@web/src/img/bg-shape/top-right-1.png' )}}" alt="Background shape blurry blob">
		<img class="s2 js-s2 js-lazy" data-src="{{ alias('@web/src/img/bg-shape/top-right-2.png' )}}" alt="Background shape blurry blob">
		<img class="s3 js-s3 js-lazy" data-src="{{ alias('@web/src/img/bg-shape/top-right-3.png' )}}" alt="Background shape blurry blob">
	</div>
	<div class="bg-shape bg-shape--bottom-left js-bg-shape" data-version="bottom-left">
		<img class="s1 js-s1" src="{{ alias('@web/src/img/bg-shape/bottom-left-1.png' )}}" alt="Background shape blurry blob">
		<img class="s2 js-s2 js-lazy" data-src="{{ alias('@web/src/img/bg-shape/bottom-left-2.png' )}}" alt="Background shape blurry blob">
	</div>
	<div class="u-wrapper u-wrapper--medium-wide">
		<div class="contact">
			<div class="contact__header">
				{% if subtitle %}
					<span class="contact__subtitle u-subtitle u-subtitle--medium">{{subtitle}}</span>
				{% endif %}
				{% if title %}
					<h1 class="contact__title u-title u-title--big">{{title}}</h1>
				{% endif %}
			</div>
			<div class="contact__content">
				<div class="contact__address">
					<div class="contact__links-hld">
						{% for link in links %}
							{% set text = link.text %}
							{% set button = link.button %}
							<div class="contact__link">
								<p class="text">{{ text }}</p>
								<a href="{{ button.url }}" target="{{ button.target ? '_blank' : '_self' }}" rel="{{ button.target ? 'noopener noreferrer' : null }}" class="btn u-btn u-btn--arrow">
									<span class="text">{{ button.customText }}</span>
								</a>
							</div>
						{% endfor %}
					</div>
					{% if image %}
						<img class="js-lazy contact__image" data-src="{{ image.getUrl() }}" alt="{{title}}"/>
					{% endif %}
					{% if offices %}
						<div class="contact__offices">
							{% for office in offices %}
								{% set name = office.officeName %}
								{% set address = office.officeAddress %}
								<div class="contact__office office">
									{% if name %}
										<p class="office__name">{{ name }}</p>
									{% endif %}
									{% if address %}
										<p class="office__address">{{ address }}</p>
									{% endif %}
								</div>
							{% endfor %}
						</div>
					{% endif %}
					{% if socials %}
						<ul class="contact__socials">
							{% for social in socials %}
								<li class="contact__socials-link">
									{% if social.socialLink and social.socialName and social.socialIcon %}
										<a href="{{ social.socialLink }}" target="_blank" rel="noopener noreferrer">
											<span class="icon icon-{{ social.socialName|lower }}"></span>
										</a>
									{% endif %}
								</li>
							{% endfor %}
						</ul>
					{% endif %}
				</div>
				<div class="contact__form form">
					<h2 class="form__title">Contact & Subscribe</h2>
					<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
					<script
							src="https://code.jquery.com/jquery-3.6.0.min.js"
							integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
							crossorigin="anonymous">
					</script>
					<script>
						function handleState() {
							const fields = document.querySelectorAll('.field input');
							const selects = document.querySelectorAll('.hs-fieldtype-select select');
							if (fields && fields.length > 0) {
								fields.forEach(field => {
									field.addEventListener('input', () => {
										field.parentNode.parentNode.classList.add('is-active');
										if (!field.value) {
											field.parentNode.parentNode.classList.remove('is-active');
										}
									});
								});
							}
							if (selects && selects.length > 0) {
								selects.forEach(select => {
									select.addEventListener('change', () => {
										select.parentNode.parentNode.classList.add('is-active');
										handleState();
									});
								});
							}
						};
						hbspt.forms.create({
							region: "na1", 
							portalId: "4249967", 
							formId: "9dcd0c70-c053-4b14-b04c-876fcb93b4b1",
							onFormReady: function() {
								handleState();
							},
						});
					</script>
				</div>
			</div>
		</div>
	</div>
</section>
